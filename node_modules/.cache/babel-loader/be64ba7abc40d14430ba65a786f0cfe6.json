{"ast":null,"code":"import { PACKET_TYPES } from \"./commons.js\";\nvar withNativeBlob = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\";\nvar withNativeArrayBuffer = typeof ArrayBuffer === \"function\"; // ArrayBuffer.isView method is not defined in IE10\n\nvar isView = function isView(obj) {\n  return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj && obj.buffer instanceof ArrayBuffer;\n};\n\nvar encodePacket = function encodePacket(_ref, supportsBinary, callback) {\n  var type = _ref.type,\n      data = _ref.data;\n\n  if (withNativeBlob && data instanceof Blob) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(data, callback);\n    }\n  } else if (withNativeArrayBuffer && (data instanceof ArrayBuffer || isView(data))) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(new Blob([data]), callback);\n    }\n  } // plain string\n\n\n  return callback(PACKET_TYPES[type] + (data || \"\"));\n};\n\nvar encodeBlobAsBase64 = function encodeBlobAsBase64(data, callback) {\n  var fileReader = new FileReader();\n\n  fileReader.onload = function () {\n    var content = fileReader.result.split(\",\")[1];\n    callback(\"b\" + (content || \"\"));\n  };\n\n  return fileReader.readAsDataURL(data);\n};\n\nfunction toArray(data) {\n  if (data instanceof Uint8Array) {\n    return data;\n  } else if (data instanceof ArrayBuffer) {\n    return new Uint8Array(data);\n  } else {\n    return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n  }\n}\n\nvar TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n  if (withNativeBlob && packet.data instanceof Blob) {\n    return packet.data.arrayBuffer().then(toArray).then(callback);\n  } else if (withNativeArrayBuffer && (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n    return callback(toArray(packet.data));\n  }\n\n  encodePacket(packet, false, function (encoded) {\n    if (!TEXT_ENCODER) {\n      TEXT_ENCODER = new TextEncoder();\n    }\n\n    callback(TEXT_ENCODER.encode(encoded));\n  });\n}\nexport { encodePacket };","map":{"version":3,"sources":["/home/dheerajcl/Code-pulse/Codepulse/node_modules/engine.io-parser/build/esm/encodePacket.browser.js"],"names":["PACKET_TYPES","withNativeBlob","Blob","Object","prototype","toString","call","withNativeArrayBuffer","ArrayBuffer","isView","obj","buffer","encodePacket","supportsBinary","callback","type","data","encodeBlobAsBase64","fileReader","FileReader","onload","content","result","split","readAsDataURL","toArray","Uint8Array","byteOffset","byteLength","TEXT_ENCODER","encodePacketToBinary","packet","arrayBuffer","then","encoded","TextEncoder","encode"],"mappings":"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","sourcesContent":["import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data\n            .arrayBuffer()\n            .then(toArray)\n            .then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, encoded => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n"]},"metadata":{},"sourceType":"module"}